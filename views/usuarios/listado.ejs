<%- include('../partials/header', { title }) %>

<h1 class="mb-4">Usuarios del Sistema</h1>

<a href="/usuarios/registro" class="btn btn-success mb-3">➕ Crear nuevo usuario</a>

<% if (usuarios.length === 0) { %>
  <div class="alert alert-info">No hay usuarios registrados.</div>
<% } else { %>
  <table class="table table-striped table-bordered align-middle">
    <thead class="table-dark">
      <tr>
        <th>#</th>
        <th>Nombre de Usuario</th>
        <th>Rol</th>
        <th class="text-center">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <% usuarios.forEach((u, i) => { %>
        <tr>
          <td><%= i + 1 %></td>
          <td><%= u.username %></td>
          <td><%= u.rol %></td>
          <td class="text-center">
            <a href="/usuarios/editar/<%= u.id %>" class="btn btn-sm btn-primary me-2">✏️ Editar</a>
            <form action="/usuarios/eliminar/<%= u.id %>" method="POST" class="d-inline" onsubmit="return confirm('¿Eliminar este usuario?')">
              <button class="btn btn-sm btn-danger">🗑️ Eliminar</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
<% } %>

<%- include('../partials/footer') %>
